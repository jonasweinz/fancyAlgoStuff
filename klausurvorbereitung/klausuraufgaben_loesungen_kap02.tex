% header
\documentclass[10pt,a4paper]{article}

\usepackage[utf8]{inputenc}
\usepackage{hyperref}
\usepackage{amssymb}
\usepackage{amsmath}
\usepackage{ngerman}
\usepackage{gensymb}
\usepackage{enumitem}
\usepackage{stmaryrd}

%Das brauchen wir:
\newcommand{\zz}{\mathrm{Z\kern-.3em\raise-0.5ex\hbox{Z}}}

% the document
\begin{document}

% create the title
\title{Klausuraufgaben \\
\small{Kapitel 8 - Algorithmen auf Graphen}}
\author{Tom Kneiphof}
\date{\today}
\maketitle

\section*{Aufgabe 1}

\paragraph{a)}
Ein Matching $M \subseteq E$ eines ungerichteten Graphens $G = (V, E)$ ist eine Teilmenge der Kanten, so dass kein Knoten an zwei Kanten beteiligt ist.
\begin{equation*}
\forall \{v,w\}, \{x, y\} \in M \subseteq E : \{v, w\} \cap \{x, y\} = \emptyset
\end{equation*}


\paragraph{b)}
Bei einem \textbf{Nicht erweiterbaren Matching} handelt es sich um ein Matching $M$, zu dem keine Kante aus $E$ hinzugenommen werden kann, so dass es ein Matching bleibt.
\begin{equation*}
\forall \{v, w\} \in E \setminus M : M \cup \{ \; \{v, w\} \; \} \; \textnormal{ist kein Matching}
\end{equation*}

Bei einem \textbf{Maximales Matching} handelt es sich um ein Matching $M_{max}$ maximaler Gr\"o{\ss}e.
Es gibt also kein Matching welches mehr Kanten enth\"alt als $M_{max}$. Es gilt:
\begin{equation*}
\forall M : | M | \leq | M_{max} |
\end{equation*}


\paragraph{c)}
Satz von Berge: Ein Matching $M$ ist genau dann maximal, falls es keinen $M$-augmentierenden Pfad gibt.

\paragraph{d)}
Beweis des Satzes von Berge:

\paragraph{$\Rightarrow$}
Annahme: Es existiert ein $M$-augmentierender Pfad $P$.
Definiere $M' := M \oplus P$. Dann gilt $|M'| > |M|$, da $n$ Kanten entfernt wurden und $n+1$ Kanten hinzugef\"ugt wurden.
Dies ist ein Widerspruch dazu, dass $M$ bereits ein Maximales Matching war.

\paragraph{$\Leftarrow$}
Sei $M$ ein Matching in $G$, und existiere kein $M$-augmentierender Pfad. Sei weiter $M_{max}$ ein beliebiges maximales Matching in $G$. Annahme: $|M| < |M_{max}|$.
Betrachte $G' := (V, M \oplus M_{max})$. Da aus beiden Matchings je h\"ochstens eine Kante inzident zu $v$ sein kann, gilt:
\begin{equation*}
\forall v \in V : deg_{G'}(v) \leq 2
\end{equation*}
Die Zusammenhangskomponenten von $G'$ sind also isolierte Knoten, Kreise gerader L\"ange mit abwechselnden Kanten aus $M$ und $M_{max}$ oder Pfade mit abwechselnden Kanten aus $M$ und $M_{max}$.
Da $|M| < |M_{max}|$ angenommen wurde, gibt es einen $M$-augmentierenden Pfad $P$ in $G'$, dessen Endknoten beide $M$-frei sind. Da $P$ auch in $G$ existiert, gibt es einen $M$-augmentierenden Pfad in $G$, was ein Widerspruch dazu ist, dass ein solcher Pfad nicht existiert.

\section*{Aufgabe 2}
% Transformiere Nach erreichbarkeit in G_m
% + korrektheit
Gegeben sei ein Bipartiter Graph $G = (A, B, E)$ sowie ein Matching $M$ auf $G$. Konstruiere gerichteten Graphen $G_M = (A', B', E')$ wie folgt:
\begin{equation*}
A' := A \cup \{s\}  \qquad B':=B \cup \{t\} \qquad s,t \notin A \cup B \qquad s \neq t
\end{equation*}
Die Kanten die im Matching sind, werden von $A$ nach $B$ gerichtet und die Katen die nicht im Matching sind von $B$ nach $A$ gerichtet. Von $s$ aus sind die Knoten erreichbar die in $B$ $M$-frei sind, und von $M$-freien Knoten in $A$ aus ist $t$ erreichbar.
\begin{equation*}
E_1 := \{ \, (u, v) \mid (u, v) \in M, u \in A, v \in B \, \} \\
\end{equation*}
\begin{equation*}
E_2 := \{ \, (u, v) \mid (u, v) \in E \setminus M, u \in B, v \in A \, \}
\end{equation*}
\begin{equation*}
E_3 := \{ \, (s, b) \mid b \in B \textnormal{ ist $M$-frei} \, \} \cup \{ \, (a, t) \mid a \in A \textnormal{ ist $M$-frei} \, \}
\end{equation*}
\begin{equation*}
E' := E_1 \cup E_2 \cup E_3
\end{equation*}
Nun existiert in $G_M$ genau dann ein Pfad von $s$ nach $t$, wenn ein $M$-augmentierender Pfad in $G$ existiert.
\paragraph{Beweis}

\paragraph{$\Rightarrow$}
Sei $P = s, v_0, \ldots, v_k, t$ ein Pfad von $s$ nach $t$ in $G_M$.
Daraus folgt direkt, dass $v_0 \in B$ $M$-frei ist, sowie $v_k \in A$ $M$-frei.
Aus der Konstruktion von $E'$ folgt, dass die Kanten $(v_i, v_{i+1})$ abwechselnd aus $M$ und $E \setminus M$ kommen.
Also ist $v_0, \ldots, v_k$ ein $M$-augmentierender Pfad in $G$.

\paragraph{$\Leftarrow$}
Sei $P = v_0, \ldots, v_k$ ein $M$-augmentierender Pfad in $G$. O.B.d.A. seien $v_0 \in B$ und $v_k \in A$.
\begin{enumerate}
	\item $(s, v_0) \in E'$ da $v_0$ $M$-frei ist, und $v_0 \in B$
	\item $(v_k, t) \in E'$ da $v_k$ $M$-frei ist, und $v_k \in A$
	\item $v_i \in A$ falls $i$ ungerade
	\item $v_i \in B$ falls $i$ gerade
	\item $\{v_i, v_{i+1}\} \in M$ falls $i$ ungerade
	\item $\{v_i, v_{i+1}\} \in E \setminus M$ falls $i$ gerade
\end{enumerate}
Es existiert also eine Kante $(s, v_0) \in E'$ und $(v_k, t) \in E'$,
sowie die Kanten $(v_i, v_{i+1}) \in E'$.
Damit ist $P' = s, v_0, \ldots, v_k, t $ ein Pfad von $s$ nach $t$ in $G_M$.


\section*{Aufgabe 3}
% Zeige O(V*(V+E))
Betrachte den in Aufgabe 2 konstruierten Graphen $G_M$.
Die Konstruktion von $G_M$ ist in $O(|V|*(|V|+|E|))$ realisierbar.
$A'$ und $B'$ werden in konstanter Zeit konstruiert (ggf $O(\log|V|)$, je nach Datenstruktur).
$E'$ wird in $O(|V|*|E|)$ konstruiert, da f\"ur jede Kante in $E$ noch gepr\"uft werden muss, ob sie in $M$ liegt.
Eine Tiefensuche auf $G_M$ dauert $O(|V|+|E|)$.
Der gefundene Pfad hat h\"ochstens L\"ange $O(|V|)$, jede Kante kann h\"ochstens $O(\log(|V|)^2) = O(|V|)$ eingef\"ugt oder entfernt werden, falls die Kanten in Form von Nachbarschaftslisten gespeichert sind (Adjazenzmatrizen sind da irgendwo in $O(1)$).
\begin{equation*}
O(|V|*(|V|+|E|)) + O(|V|+|E|) + O(|V|^2) \subseteq O(|V|*(|V|+|E|))
\end{equation*}

\section*{Aufgabe 4}

    \begin{enumerate}[label={\alph*)}]
        \item Ein gültiges Matching ist eine Menge $M \subseteq E$ wenn keine
            zwei unterschiedliche Elemente aus $M$ einen gemeinsamen Knoten
            haben.
            Ein Matching $M'$ heißt nicht erweiterbar, wenn es keine Kante
            $ e \in E \setminus M$ gibt, sodass $\{e\} \cup M$ ein gültiges
            Matching ist.
        \item
            TODO: ``Pseudocode Carsten...''
        \item
            $\zz$: $M$ ist nicht erweiterbares Matching $\Rightarrow
            |M| \geq \frac{1}{2}|M_{max}|$
            \\
            \textbf{Annahme:} $M$ ist nicht erweiterbares Matching und 
            $|M| < \frac{1}{2}|M_{max}|$
            \\ 
            Dann muss es aber eine Kante $m_0 \in M_{max}$ geben für
            die gilt: $m_0 \notin M$ und die Kante Verbindet zwei Knoten,
            die von keiner Kante in $M$ überdeckt werden
            \\
            $\Rightarrow M$ kann um $m_0$ erweitert werden
            \\
            $\Rightarrow M$ ist nicht ein nicht erweiterbares Matching
            $\lightning$ Widerspruch!            
        \item
            
            
    \end{enumerate}

    
\end{document}